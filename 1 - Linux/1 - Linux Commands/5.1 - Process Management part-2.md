# Process Management Part-2

<img src="https://drive.google.com/uc?export=view&id=1GjwR2D_h0kBch3bBB4LXWkXBsdsJkaGr" width="450" height="720">

<br>

### top

```top``` ek real-time process monitoring command hai jo tumhare system me chal rahe processes aur unke resource usage (CPU, Memory, Time, etc.) ko continuously update karke dikhata hai.

Tum ise Windows ke Task Manager ka Linux version samajh lo (CLI version).

Ye tumhe ek dynamic live view deta hai system activity ka.

Example:
```
top
```
Output:
```
top - 19:04:21 up 18:27,  3 users,  load average: 0.00, 0.01, 0.00
Tasks:  46 total,   1 running,  41 sleeping,   4 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.1 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   7705.2 total,   6546.5 free,    888.9 used,    504.3 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   6816.2 avail Mem

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
    173 node_ex+  20   0 1243052  24068  13280 S   2.7   0.3   3:38.16 node_exporter
    169 grafana   20   0 1768520 277044 164844 S   2.3   3.5   8:33.17 grafana
    180 prometh+  20   0 1546652 116592  53444 S   0.3   1.5   2:57.53 prometheus
      1 root      20   0   21864  13160   9476 S   0.0   0.2   0:15.77 systemd
```

Explanation:

<br>

**Upar ka Section (System Summary)**:
```
top - 19:04:21 up 18:27,  3 users,  load average: 0.00, 0.01, 0.00
Tasks:  46 total,   1 running,  41 sleeping,   4 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.1 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   7705.2 total,   6546.5 free,    888.9 used,    504.3 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   6816.2 avail Mem
```

- **line 1** → Current time, uptime (kitne time se system chal raha hai), logged in users, load average (1min, 5min, 15min CPU load).
- **line 2** → Kitne processes hain (running, sleeping, stopped, zombie).
- **line 3** → CPU usage breakup:
  - ```us``` → user processes CPU usage.
  - ```sy``` → system (kernel) CPU usage.
  - ```id``` → idle CPU.
  - ```wa``` → I/O wait.
  - ```hi``` → hardware interrupts.
  - ```si``` → software interrupts.
  - ```st``` → stolen time (VMs me hota hai).
 
- **line 4 & 5** → Memory aur Swap usage (total, free, used, cache).

<br>

**Neeche ka Section (Process List)**:
```
    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
    173 node_ex+  20   0 1243052  24068  13280 S   2.7   0.3   3:38.16 node_exporter
    169 grafana   20   0 1768520 277044 164844 S   2.3   3.5   8:33.17 grafana
    180 prometh+  20   0 1546652 116592  53444 S   0.3   1.5   2:57.53 prometheus
      1 root      20   0   21864  13160   9476 S   0.0   0.2   0:15.77 systemd
```

- **PID** → Process ID.
- **USER** → kis user ne process start kiya.
- **PR** → priority.
- **NI** → nice value (priority adjust karne ke liye).
- **VIRT** → virtual memory used.
- **RES** → physical memory (RAM) used.
- **SHR** → shared memory.
- **S** → process state (R = Running, S = Sleeping, Z = Zombie).
- **%CPU** → process ka CPU usage.
- **%MEM** → memory usage percentage.
- **TIME+** → total CPU time since start.
- **COMMAND** → process ka naam / command.

<br>

**Useful Keys inside top**:

Jab tum ```top``` run karte ho, tum interactive mode me hote ho. Us time kuch keys dabakar tum output customize kar sakte ho, lekin ye keys naye version main kaan nhi karte hain, ```f```, ```< >```, ```s``` se sort karna hota hai.:
- ```P``` → Sort by CPU usage (highest first).
- ```M``` → Sort by Memory usage (highest first).
- ```T``` → Sort by running time (longest first).
- ```k``` → Kill process (enter PID).
- ```r``` → Renice (priority change).
- ```q``` → Quit ```top```.
- ```h``` → Help menu.

<br>

**Examples of top**:
- Specific user ke processes dekhna:
```
top -u ubuntu
```
Sirf user ```ubuntu``` ke processes dikhayega.

- Specific process ko highlight karna:
```
top -p 1234
```
Sirf process ID ```1234``` ka status dikhayega.

- Refresh interval change karna:

By default refresh 3 seconds me hota hai. Change karne ke liye:
```
top -d 1
```

<br>

**Real-Life Example Scenario**:
- Scenario 1: Server slow chal raha hai, tumhe pata karna hai ki kaun sa process sabse zyada CPU le raha hai.
```
Run top, fir press P.
```
- Scenario 2: Memory usage continuously high hai.
```
Run top, fir press M.
```
- Scenario 3: Ek runaway process (say ```python``` script) bahut CPU consume kar raha hai, tumhe usko kill karna hai.
```
Run top, note down uska PID, press k, enter PID → process kill ho jayega.
```

<br>
<br>

### kill

```kill``` kya hai?
- Naam se lagta hai ki sirf process kill (terminate) karta hai, lekin asal me ```kill``` ka kaam hai signals bhejna processes ko.
- Linux me har process ek signal receive kar sakta hai (jaise interrupt, stop, continue, terminate).
- ```kill``` command ka use karke tum manually signal bhej sakte ho kisi bhi process ko.

Matlab: ```kill``` = "process ko ek signal bhejna".

Default signal = ```SIGTERM``` (terminate process politely).

<br>

**Signal Bhejna Aur Process Termination**:
- kill command default SIGTERM (signal 15) bhejta hai, matlab terminate ka request bhejna.
- Kill signal milne ke baad process ko terminate karne ka actually pura kaam Linux ka kernel hi karta hai—signal deliver karta hai, cleanup execute karwata hai ya direct kill kar deta hai, aur process ki system se entry hata bhi deta hai.
- Agar signal SIGKILL hai (kill -9), toh kernel direct process ko turant terminate kar deta hai. Is signal ko process ignore nahi kar sakta, aur na hi koi cleanup chal paata hai.

<br>

**Syntax of kill**:
```
kill [OPTIONS] PID
```
- PID = Process ID (jo tumhe ```ps```, ```top```, ```htop``` se milega).
- OPTIONS = Kya signal bhejna hai.

<br>

**Common Signals (jo kill ke sath use hote hain)**:

Linux me signals number aur naam dono hote hain. Ye kuch important hain:

| Signal    | Number | Description                                                        |
| --------- | ------ | ------------------------------------------------------------------ |
| `SIGTERM` | 15     | Process ko terminate karne ka polite request (default)             |
| `SIGKILL` | 9      | Forcefully process ko kill karta hai (bina cleanup)                |
| `SIGSTOP` | 19     | Process ko pause/stop karta hai                                    |
| `SIGCONT` | 18     | Stopped process ko resume karta hai                                |
| `SIGHUP`  | 1      | Process ko hangup signal, often config reload ke liye use hota hai |

Tum ```kill -l``` likh kar saare signals ki list dekh sakte ho.

<br>

**Examples**:
- Process terminate karna (default ```SIGTERM```):
```
kill 1234
```
PID 1234 wale process ko politely terminate karne ka signal bhejega.

- Forcefully kill karna (jab process normal terminate na ho):
```
kill -9 1234
```
-9 ```SIGKILL``` bhejta hai, jo process ko turant maar deta hai.

- Process ko stop karna:
```
kill -STOP 1234
```
Process ko pause kar dega. Ek long-running job temporarily stop karna hai (baad me continue karne ke liye).

- Process ko resume karna:
```
kill -CONT 1234
```
Agar process STOP hua hai, to usko resume karega.

- Config reload ke liye SIGHUP:
```
kill -HUP 2345
```

- Multiple Processes ek sath kill karna:
```
kill -9 1234 2345 3456
```
Ek hi command me multiple PIDs ko kill kar sakte ho.

- Process ko naam se kill karna (pkill, killall):

kill me tumhe PID dena padta hai, lekin kabhi PID maloom nahi hota. Tab tum use karte ho:

```pkill``` (process name match karke kill karta hai):
```
pkill -9 firefox
```

```killall``` (process name se kill karta hai, multiple OS flavors me available):
```
killall -15 nginx
```
Sabhi nginx processes ko SIGTERM bhejega.

<br>
<br>

### htop

```htop``` kya hai?
- ```htop``` ek interactive process viewer hai jo top command ka advanced version hai. Ye ek colourful dashboard dikhata hai.
- Ye tumhe real-time system monitoring dikhata hai, jaise:
  - CPU usage (per-core breakdown ke sath).
  - Memory usage (RAM aur Swap dono).
  - Processes ka list (PID, User, State, Priority, CPU %, Memory %).
  - Process tree (kis process ka parent/child hai).
 
Matlab tum ```htop``` ko ek colorful dashboard samajh lo jo tumhare system ke resources aur processes ka live status dikhata hai.

<br>

**htop ka basic usage**:

Simply run:
```
htop
```
Tumhe ek colorful interactive screen dikhai degi jo kuch is tarah ki hoti hai:

**Upper Section (System Meters)**:
- CPU bar: har ek core ka usage alag se dikhata hai (bar aur percentage dono).
- Memory bar: RAM usage (used vs total).
- Swap bar: swap memory usage.
- Load Average: system load 1, 5, 15 minutes ka.
- Uptime: system kitna time se chal raha hai.

**Lower Section (Process List)**:
- Table format me processes ki list dikhata hai.
  - PID (process id).
  - USER (kaun chala raha hai).
  - PRI (priority).
  - NI (nice value).
  - VIRT/RES/SHR (memory info).
  - S (process state: R = running, S = sleeping, Z = zombie).
  - %CPU, %MEM.
  - Command (kaunsa program chal raha hai).
 
<br>

**htop ke Interactive Controls**:

```htop``` interactive hai, matlab tum arrow keys aur shortcut keys use kar sakte ho.

Important Keys:
- ↑ / ↓ → process list me move karna.
- F1 → help dikhata hai.
- F2 → setup (customize view, colors, meters).
- F3 → search process by name.
- F4 → filter processes (sirf specific process dikhana).
- F5 → tree view (parent-child relationship).
- F6 → sort by column (jaise CPU%, Memory%).
- F7/F8 → nice value change karna (priority kam/jyada karna).
- F9 → kill process (signal choose karne ka option aata hai, jaise 15 = SIGTERM, 9 = SIGKILL).
- F10 → quit htop.

<br>

**Examples**:
- CPU heavy process find karna:
```
Run htop.
Press F6 → select "CPU%"
Sabse upar CPU heavy process aa jayega.
```
 
- Memory leak check karna:
```
Run htop
Press F6 → sort by "MEM%"
Tumhe dikhega kaunsa process sabse jyada RAM kha raha hai.
```

- Specific process dhoondhna:
```
Run htop
Press F3, fir naam likho (jaise nginx).
Sirf nginx related processes highlight ho jayenge.
```

- Process ko kill karna:
```
Arrow keys se process select karo
Press F9
Choose signal (15 = terminate, 9 = force kill)
Direct kill ho jayega bina PID ya kill command use kiye.
```

