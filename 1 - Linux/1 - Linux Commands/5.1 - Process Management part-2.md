# Process Management Part-2

<img src="https://drive.google.com/uc?export=view&id=1GjwR2D_h0kBch3bBB4LXWkXBsdsJkaGr" width="450" height="720">

<br>

### top

```top``` ek real-time process monitoring command hai jo tumhare system me chal rahe processes aur unke resource usage (CPU, Memory, Time, etc.) ko continuously update karke dikhata hai.

Tum ise Windows ke Task Manager ka Linux version samajh lo (CLI version).

Ye tumhe ek dynamic live view deta hai system activity ka.

Example:
```
top
```
Output:
```
top - 19:04:21 up 18:27,  3 users,  load average: 0.00, 0.01, 0.00
Tasks:  46 total,   1 running,  41 sleeping,   4 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.1 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   7705.2 total,   6546.5 free,    888.9 used,    504.3 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   6816.2 avail Mem

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
    173 node_ex+  20   0 1243052  24068  13280 S   2.7   0.3   3:38.16 node_exporter
    169 grafana   20   0 1768520 277044 164844 S   2.3   3.5   8:33.17 grafana
    180 prometh+  20   0 1546652 116592  53444 S   0.3   1.5   2:57.53 prometheus
      1 root      20   0   21864  13160   9476 S   0.0   0.2   0:15.77 systemd
```

Explanation:

<br>

**Upar ka Section (System Summary)**:
```
top - 19:04:21 up 18:27,  3 users,  load average: 0.00, 0.01, 0.00
Tasks:  46 total,   1 running,  41 sleeping,   4 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.1 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   7705.2 total,   6546.5 free,    888.9 used,    504.3 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   6816.2 avail Mem
```

- **line 1** → Current time, uptime (kitne time se system chal raha hai), logged in users, load average (1min, 5min, 15min CPU load).
- **line 2** → Kitne processes hain (running, sleeping, stopped, zombie).
- **line 3** → CPU usage breakup:
  - ```us``` → user processes CPU usage.
  - ```sy``` → system (kernel) CPU usage.
  - ```id``` → idle CPU.
  - ```wa``` → I/O wait.
  - ```hi``` → hardware interrupts.
  - ```si``` → software interrupts.
  - ```st``` → stolen time (VMs me hota hai).
 
- **line 4 & 5** → Memory aur Swap usage (total, free, used, cache).

<br>

**Neeche ka Section (Process List)**:
```
    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
    173 node_ex+  20   0 1243052  24068  13280 S   2.7   0.3   3:38.16 node_exporter
    169 grafana   20   0 1768520 277044 164844 S   2.3   3.5   8:33.17 grafana
    180 prometh+  20   0 1546652 116592  53444 S   0.3   1.5   2:57.53 prometheus
      1 root      20   0   21864  13160   9476 S   0.0   0.2   0:15.77 systemd
```

- **PID** → Process ID.
- **USER** → kis user ne process start kiya.
- **PR** → priority.
- **NI** → nice value (priority adjust karne ke liye).
- **VIRT** → virtual memory used.
- **RES** → physical memory (RAM) used.
- **SHR** → shared memory.
- **S** → process state (R = Running, S = Sleeping, Z = Zombie).
- **%CPU** → process ka CPU usage.
- **%MEM** → memory usage percentage.
- **TIME+** → total CPU time since start.
- **COMMAND** → process ka naam / command.

<br>

**Useful Keys inside top**:

Jab tum ```top``` run karte ho, tum interactive mode me hote ho. Us time kuch keys dabakar tum output customize kar sakte ho:
- ```P``` → Sort by CPU usage (highest first).
- ```M``` → Sort by Memory usage (highest first).
- ```T``` → Sort by running time (longest first).
- ```k``` → Kill process (enter PID).
- ```r``` → Renice (priority change).
- ```q``` → Quit ```top```.
- ```h``` → Help menu.

<br>

**Examples of top**:
- Specific user ke processes dekhna:
```
top -u ubuntu
```
Sirf user ```ubuntu``` ke processes dikhayega.

- Specific process ko highlight karna:
```
top -p 1234
```
Sirf process ID ```1234``` ka status dikhayega.

- Refresh interval change karna:

By default refresh 3 seconds me hota hai. Change karne ke liye:
```
top -d 1
```

<br>

**Real-Life Example Scenario**:
- Scenario 1: Server slow chal raha hai, tumhe pata karna hai ki kaun sa process sabse zyada CPU le raha hai.
```
Run top, fir press P.
```
- Scenario 2: Memory usage continuously high hai.
```
Run top, fir press M.
```
- Scenario 3: Ek runaway process (say ```python``` script) bahut CPU consume kar raha hai, tumhe usko kill karna hai.
```
Run top, note down uska PID, press k, enter PID → process kill ho jayega.
```
